<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üç¥ Recipe Book & Meal Planner</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    margin:0;
    background: linear-gradient(to bottom, #d0f0c0, #a0e0ff);
    color: #333;
  }
  header {
    background: #2e8b57;
    color:white;
    text-align:center;
    padding:1.5rem;
    font-size:1.8rem;
  }
  nav {
    display:flex;
    justify-content:space-around;
    background:#66cdaa;
    flex-wrap:wrap;
  }
  nav button {
    background:transparent;
    border:none;
    color:white;
    padding:0.8rem 1rem;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s;
    border-radius:8px;
    margin:4px 0;
  }
  nav button.active, nav button:hover {
    background: rgba(255,255,255,0.2);
  }
  .container {
    width:90%;
    max-width:900px;
    margin:2rem auto;
    background:white;
    padding:2rem;
    border-radius:15px;
    box-shadow:0 4px 10px rgba(0,0,0,0.1);
  }
  .hidden { display:none; }
  h2 { text-align:center; color:#2e8b57; margin-bottom:1rem; }
  img { width:100%; border-radius:15px; margin-bottom:1rem; }
  p { text-align:center; font-size:1.1rem; line-height:1.6; }

  input, textarea, button {
    display:block;
    width:100%;
    margin:0.5rem 0;
    padding:0.7rem;
    border-radius:8px;
    border:1px solid #ddd;
    font-size:1rem;
  }
  button { background:#2e8b57; color:white; font-weight:bold; border:none; cursor:pointer; }
  button:hover { background:#3aa278; }

  .recipe-card { border:1px solid #eee; border-radius:10px; padding:1rem; margin:1rem 0; background:#f0fff0; cursor:grab; }
  .recipe-card img { width:100%; border-radius:10px; margin-bottom:0.5rem; }

  .calendar { display:grid; grid-template-columns:repeat(7,1fr); gap:8px; margin-top:20px; }
  .day { border:2px dashed #2e8b57; min-height:120px; border-radius:8px; padding:5px; background:#f0fff0; }
  .day h4 { text-align:center; color:#2e8b57; margin:0 0 5px 0; }
  .draggable { cursor:grab; background:#66cdaa; color:white; padding:4px 6px; border-radius:6px; margin:3px 0; }

  @media(max-width:600px){
    nav { flex-direction:column; }
    nav button { width:100%; text-align:center; }
    .calendar { grid-template-columns:repeat(2,1fr); }
  }
</style>
</head>
<body>

<header>üçì My Recipe Book & Meal Planner üçï</header>

<nav>
  <button id="tab-home" class="active" onclick="showSection('home')">Home</button>
  <button id="tab-add" onclick="showSection('add')">Add Recipe</button>
  <button id="tab-book" onclick="showSection('book')">Recipe Book</button>
  <button id="tab-meal" onclick="showSection('meal')">Meal Planner</button>
</nav>

<div class="container">

  <!-- Home Overview -->
  <section id="home-section">
    <h2>Welcome to Your Digital Kitchen!</h2>
    <img src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=900&q=80" alt="Delicious food">
    <p>
      üç¥ Keep track of your favorite recipes and plan your weekly meals.<br>
      üìñ <b>Recipe Book:</b> View all your recipes with images and instructions.<br>
      üìÖ <b>Meal Planner:</b> Drag and drop recipes into your weekly calendar to plan your meals.<br>
      ü•≥ Save, organize, and share your culinary creations all in one place!
    </p>
  </section>

  <!-- Add Recipe -->
  <section id="add-section" class="hidden">
    <h2>Add a Recipe</h2>
    <input id="title" placeholder="Recipe title" />
    <textarea id="ingredients" placeholder="Ingredients (comma separated)"></textarea>
    <textarea id="instructions" placeholder="Instructions"></textarea>
    <button onclick="addRecipe()">Add Recipe üç≥</button>
  </section>

  <!-- Recipe Book -->
  <section id="book-section" class="hidden">
    <h2>Your Recipe Book üìñ</h2>
    <div id="recipes"></div>
  </section>

  <!-- Meal Planner -->
  <section id="meal-section" class="hidden">
    <h2>Weekly Meal Planner ü•ó</h2>
    <p style="text-align:center;">Drag recipes below into each day. Right-click to remove.</p>
    <div class="calendar" id="calendar"></div>
    <h3>Your Recipes:</h3>
    <div id="recipe-pool"></div>
    <button onclick="sharePlan()">Download Plan as Image</button>
  </section>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
let recipes = JSON.parse(localStorage.getItem('recipes')) || [];
let mealPlan = JSON.parse(localStorage.getItem('mealPlan')) || {};

function saveData(){
  localStorage.setItem('recipes', JSON.stringify(recipes));
  localStorage.setItem('mealPlan', JSON.stringify(mealPlan));
}

function showSection(id){
  ['home','add','book','meal'].forEach(s=>{
    document.getElementById(s+'-section').classList.add('hidden');
    document.getElementById('tab-'+s).classList.remove('active');
  });
  document.getElementById(id+'-section').classList.remove('hidden');
  document.getElementById('tab-'+id).classList.add('active');
  if(id==='book') displayRecipes();
  if(id==='meal') renderMealPlanner();
}

// Add Recipe
function addRecipe(){
  const titleV=document.getElementById('title').value.trim();
  const ingredientsV=document.getElementById('ingredients').value.trim();
  const instructionsV=document.getElementById('instructions').value.trim();
  if(!titleV) return alert("Enter a title!");
  const recipe={title:titleV, ingredients:ingredientsV, instructions:instructionsV, image:`https://source.unsplash.com/600x400/?food,${encodeURIComponent(titleV)}`};
  recipes.push(recipe);
  saveData();
  displayRecipes();
  document.getElementById('title').value='';
  document.getElementById('ingredients').value='';
  document.getElementById('instructions').value='';
}

// Display recipes
function displayRecipes(){
  const container=document.getElementById('recipes');
  container.innerHTML='';
  recipes.forEach((r,i)=>{
    const div=document.createElement('div');
    div.className='recipe-card';
    div.innerHTML=`<img src="${r.image}" alt="${r.title}"><h3>${r.title}</h3>
      <p><b>Ingredients:</b> ${r.ingredients}</p>
      <p><b>Instructions:</b> ${r.instructions}</p>
      <button onclick="deleteRecipe(${i})">Delete</button>`;
    container.appendChild(div);
  });
}

// Delete recipe
function deleteRecipe(i){
  recipes.splice(i,1);
  saveData();
  displayRecipes();
  renderMealPlanner();
}

// Render Meal Planner
function renderMealPlanner(){
  const calendar=document.getElementById('calendar');
  calendar.innerHTML='';
  const days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];
  days.forEach(day=>{
    const div=document.createElement('div');
    div.className='day';
    div.dataset.day=day;
    div.innerHTML=`<h4>${day}</h4>`;
    const meals=mealPlan[day]||[];
    meals.forEach(title=>{
      const card=document.createElement('div');
      card.className='draggable';
      card.textContent=title;
      card.oncontextmenu=e=>{e.preventDefault(); removeMeal(day,title);};
      div.appendChild(card);
    });
    div.addEventListener('dragover',e=>e.preventDefault());
    div.addEventListener('drop',handleDrop);
    calendar.appendChild(div);
  });
  // Recipe Pool
  const pool=document.getElementById('recipe-pool');
  pool.innerHTML='';
  recipes.forEach(r=>{
    const div=document.createElement('div');
    div.className='draggable';
    div.textContent=r.title;
    div.draggable=true;
    div.addEventListener('dragstart',handleDragStart);
    pool.appendChild(div);
  });
}

// Drag & Drop
function handleDragStart(e){ e.dataTransfer.setData('text/plain', e.target.textContent); }
function handleDrop(e){
  const title=e.dataTransfer.getData('text/plain');
  const day=e.currentTarget.dataset.day;
  if(!mealPlan[day]) mealPlan[day]=[];
  if(!mealPlan[day].includes(title)) mealPlan[day].push(title);
  saveData();
  renderMealPlanner();
}
function removeMeal(day,title){
  mealPlan[day]=mealPlan[day].filter(r=>r!==title);
  saveData();
  renderMealPlanner();
}

// Share Meal Plan as Image
function sharePlan(){
  html2canvas(document.getElementById('calendar')).then(canvas=>{
    const link=document.createElement('a');
    link.download='meal-plan.png';
    link.href=canvas.toDataURL();
    link.click();
  });
}

// Initialize
showSection('home');
</script>
</body>
</html>
